# Customizing help

## Annotations

```scala mdoc:reset:invisible
import caseapp._
```

A number of annotations can be used, either on fields or on classes defining options,
to customize the help message generated by case-app.

```scala mdoc:silent
@AppName("My App")
@ProgName("my-app")
@AppVersion("0.1.0")
@ArgsName("things")
case class Options(
  @HelpMessage("How many foos")
  @Name("f")
  @ValueDescription("Foo count")
    foo: Int = 0
)
```

This makes the help message look like
```scala mdoc:passthrough
// FIXME Find a way to keep colors in the output
import caseapp.core.help.HelpFormat
val help: Help[Options] = Help.derive
println("```text")
println(help.help(HelpFormat.default(ansiColors = false), showHidden = false))
println("```")
```

Without any of the annotations, the help message looks like
```scala mdoc:passthrough
case class Options0(
  @Name("f")
    foo: Int = 0
)
// FIXME Find a way to keep colors in the output
import caseapp.core.help.HelpFormat
val help0: Help[Options0] = Help.derive
println("```text")
println(help0.help(HelpFormat.default(ansiColors = false), showHidden = false))
println("```")
```

## Hidden options

```scala mdoc:reset-object:invisible
import caseapp._
```

Annotate an option with `@Hidden` to hide it from the default help message:
```scala mdoc:silent
case class Options(
  @Hidden
    foo: Int = 0,
  other: String = ""
)
```

This makes the help message look like
```scala mdoc:passthrough
// FIXME Find a way to keep colors in the output
import caseapp.core.help.HelpFormat

object MyHelperApp extends CaseApp[Options] {
  override def name = "my-app"
  def run(options: Options, args: RemainingArgs): Unit = {
    ???
  }
}
println("```text")
println(MyHelperApp.finalHelp.withProgName("my-app").help(HelpFormat.default(ansiColors = false), showHidden = false))
println("```")
```

When using hidden options alongside with the `CaseApp` class, you can offer users
to get an help message that includes the hidden options with `--full-help`, like
```scala mdoc:silent
object MyApp extends CaseApp[Options] {
  override def hasFullHelp = true
  def run(options: Options, args: RemainingArgs): Unit = {
    ???
  }
}
```

We get
```text
$ my-app --full-help
```

```scala mdoc:passthrough
println("```text")
println {
  // FIXME Find a way to keep colors in the output
  MyApp.finalHelp.withProgName("my-app").help(
    // reset colors
    MyApp.helpFormat
      .withProgName(caseapp.core.util.fansi.Attrs.Empty)
      .withCommandName(caseapp.core.util.fansi.Attrs.Empty)
      .withOption(caseapp.core.util.fansi.Attrs.Empty)
      .withHidden(caseapp.core.util.fansi.Attrs.Empty),
    showHidden = true
  )
}
println("```")
```

## Option groups

```scala mdoc:reset-object:invisible
import caseapp._
```

```scala mdoc:silent
case class Options(
  @Group("First")
    foo: Int = 0,
  @Group("Second")
    other: String = ""
)
```

This makes the help message look like
```scala mdoc:passthrough
// FIXME Find a way to keep colors in the output
import caseapp.core.help.HelpFormat

object MyHelperApp extends CaseApp[Options] {
  override def name = "my-app"
  def run(options: Options, args: RemainingArgs): Unit = {
    ???
  }
}
println("```text")
println(MyHelperApp.finalHelp.withProgName("my-app").help(HelpFormat.default(ansiColors = false), showHidden = false))
println("```")
```

When using the `CaseApp` or `Command` classes, you can sort groups with
```scala mdoc:silent
object MyApp extends CaseApp[Options] {
  override def helpFormat = super.helpFormat.withSortedGroups(
    Some(Seq("Help", "First", "Second"))
  )
  def run(options: Options, args: RemainingArgs): Unit = {
    ???
  }
}
```

One then gets
```scala mdoc:passthrough
// FIXME Find a way to keep colors in the output
println("```text")
println(MyApp.finalHelp.withProgName("my-app").help(
  // reset colors
  MyApp.helpFormat
    .withProgName(caseapp.core.util.fansi.Attrs.Empty)
    .withCommandName(caseapp.core.util.fansi.Attrs.Empty)
    .withOption(caseapp.core.util.fansi.Attrs.Empty)
    .withHidden(caseapp.core.util.fansi.Attrs.Empty)
  )
)
println("```")
```
